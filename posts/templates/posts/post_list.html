{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
     <meta charset="utf-8">
    <title>BizNews - Free News Website Template</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="Free HTML Templates" name="keywords">
    <meta content="Free HTML Templates" name="description">

    <link href="{% static 'posts/images/favicon.ico' %}" rel="icon">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/all.min.css" rel="stylesheet">

    <!-- Libraries Stylesheet -->
    <link href="{% static 'posts/lib/owlcarousel/assets/owl.carousel.min.css' %}" rel="stylesheet">

    <!-- Customized Bootstrap Stylesheet -->
    <link href="{% static 'posts/css/style.css' %}" rel="stylesheet">
    <style>
.text-truncate-3 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-line-clamp: 4;
    -webkit-box-orient: vertical;
}
</style>

</head>
<body>
    <!-- News With Sidebar Start -->
        <div class="container">
            <div class="row g-0">
                <div class="col-lg-12">
                    <div class="row">
                        <div class="col-12">
                            <div class="section-title">
                                <h4 class="m-0 text-uppercase font-weight-bold">So'ngi yangiliklar</h4>
                            </div>
                        </div>

                        {% for post in posts %}
                        <div class="col-lg-4 d-flex align-items-stretch">
                            <div class="position-relative mb-3 w-100 d-flex flex-column">
                                <img class="img-fluid w-100" src="{{ post.image.url }}" style="object-fit: cover; height: 250px;">
                                <div class="bg-white border border-top-0 p-4 flex-grow-1 d-flex flex-column">
                                    <div class="mb-2">
                                        <a class="badge badge-primary text-uppercase font-weight-semi-bold p-2 mr-2"
                                            href="{% url 'category_post_list' post.category.slug %}">{{ post.category }}</a>
                                        <a class="text-body"><small>{{ post.published_at | date:"H:i d.m.Y" }}</small></a>
                                    </div>
                                    <a class="h5 d-block mb-3 text-secondary text-uppercase font-weight-bold" href="{{ post.get_absolute_url }}">{{ post.title|truncatewords:5 }}</a>
                                    <p class="m-0 text-truncate-3 flex-grow-1">{{ post.body | truncatewords:20 }}</p>
                                </div>
                                <div class="d-flex justify-content-between bg-white border border-top-0 p-4">
                                    <div class="d-flex align-items-center">
                                        <small class="text-primary font-weight-bold"><a href="{{ post.get_absolute_url }}">Batafsil</a></small>
                                    </div>
                                    <div class="d-flex align-items-center">
                                        <small class="ml-3"><i class="far fa-eye mr-2"></i>{{ post.views }}</small>
                                        <small class="ml-3"><i class="far fa-comment mr-2"></i>{{ post.comments.count }}</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    <!-- News With Sidebar End -->
</body>
</html>